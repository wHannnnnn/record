<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<!-- js防抖节流 -->
<script>
    // 防抖： 多次执行并且执行的间隔时间小于设定时间 只执行一次  （输入框验证 滚动事件监听）
    // 具体实现方式：   
    // 非立即执行：设置延迟时间再执行函数，如果这段时间内又触发了这个函数，则清除倒计时重新计算 （最后一次） 
    // 立即执行：立即执行函数 多次执行只有间隔间隔超过设置时间才执行函数 间隔时间小于设置时间内又触发了这个函数，则清除倒计时重新计算  （执行第一次）
    // addEventListener
    var obj = {
        timer: null,
        fn: function () {
            this.timer && clearTimeout(this.timer)
            // 重新计算
            this.timer = setTimeout(() => {
                console.log('asd')
                this.timer = null
            }, 1000)
        },
        fn1: function () {
            if (!this.timer) {
                console.log('asd')
            }
            this.timer && clearTimeout(this.timer)
            // 重新计算    
            this.timer = setTimeout(() => {
                this.timer = null // 间隔超过设定时间 timer=null 上面的才能执行
            }, 1000)
        },
        // 节流： 规定在一个时间范围内，只能触发一次函数  多次触发只有一次生效
        preTime: 0,
        fn2: function () {
            // if (this.timer) {
            //     return false
            // }
            // this.timer = setTimeout(() => {
            //     this.timer = null
            //     console.log('asd')
            // }, 1000)
            // 立即执行
            if (Date.now() - this.preTime > 1000) {
                console.log('asd')
                this.preTime = Date.now()
            }
        }
    }
    window.onscroll = function () {
        obj.fn2()
    }
</script>
</html>